<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        <link rel="canonical" href="https://fin-mk..pages.dev/Python/py4_backtesting_optimal/">
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>最佳化股票交易策略─Python筆記 - Fins Note</title>
        <link href="../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css">

        <script src="../../js/jquery-1.10.2.min.js" defer></script>
        <script src="../../js/bootstrap.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../..">Fins Note</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="navitem">
                                <a href="../.." class="nav-link">首頁</a>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">新興技術 <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Exosome</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../Exosome/Exosome_101/" class="dropdown-item">Exosome 101</a>
</li>
    </ul>
  </li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">特管辦法 <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">癌症治療</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../DOMA/cancer_therapy/" class="dropdown-item">淺談癌症治療</a>
</li>
            
<li>
    <a href="../../DOMA/cancer_immune_therapy/" class="dropdown-item">癌症免疫治療</a>
</li>
    </ul>
  </li>
                                    
<li>
    <a href="../../DOMA/main_character/" class="dropdown-item">特管辦法簡介</a>
</li>
                                    
<li>
    <a href="../../DOMA/info_platform/" class="dropdown-item">資訊揭露平台</a>
</li>
                                    
<li>
    <a href="../../DOMA/doma_recent/" class="dropdown-item">特管辦法近況</a>
</li>
                                    
<li>
    <a href="../../industry/CPU_keypoint/" class="dropdown-item">細胞製備中心</a>
</li>
                                    
<li>
    <a href="../../DOMA/regular_20210209/" class="dropdown-item">特管辦法法規</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">職能框架 <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../%E8%81%B7%E8%83%BD%E6%A1%86%E6%9E%B6/%E8%81%B7%E8%83%BD%E6%A1%86%E6%9E%B6101/" class="dropdown-item">職能框架簡介</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">業界動態 <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">研討會</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../industry/57th_pharmacyforum/" class="dropdown-item">2013 藥事論壇</a>
</li>
            
<li>
    <a href="../../industry/2015_GMP_Seminar/" class="dropdown-item">2015 GMP研習</a>
</li>
            
<li>
    <a href="../../industry/Clinical_Informations_system/" class="dropdown-item">2017 臨床峰會</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">CDMO</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../CDMO/CDMO%E7%B5%B1%E6%95%B4/" class="dropdown-item">CDMO統整</a>
</li>
            
<li>
    <a href="../../CDMO/locus-cell_company/" class="dropdown-item">樂迦再生科技</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">競品研究</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../industry/fullhope_company/" class="dropdown-item">富禾生醫</a>
</li>
    </ul>
  </li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">生醫研究 <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../Medical/new_born_RDS/" class="dropdown-item">RDS</a>
</li>
                                    
<li>
    <a href="../../Medical/mers101/" class="dropdown-item">MERS</a>
</li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">COVID-19</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../Medical/covid-19_breast_feeding/" class="dropdown-item">哺乳垂直傳染</a>
</li>
    </ul>
  </li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Markdown <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../markdown/Markdown_Cheatsheet/" class="dropdown-item">Markdown語法</a>
</li>
                                    
<li>
    <a href="../../markdown/hackmd_keynote/" class="dropdown-item">HackMD簡報教學</a>
</li>
                                    
<li>
    <a href="../../markdown/marp_keynote/" class="dropdown-item">Marp簡報教學</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">雜學 <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../misc/neevo_lesson/" class="dropdown-item">Neevo網路賺錢</a>
</li>
                                    
<li>
    <a href="../../misc/ETF_00878/" class="dropdown-item">國泰ESG-ETF(00878)</a>
</li>
                                    
<li>
    <a href="../../misc/RJ45_DIY/" class="dropdown-item">RJ45網路線DIY</a>
</li>
                                    
<li>
    <a href="../../misc/solar_eclipse_2020/" class="dropdown-item">2020日環蝕</a>
</li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="1"><a href="#python" class="nav-link">最佳化股票交易策略─Python筆記</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#_1" class="nav-link">前情提要</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#_2" class="nav-link">引入模組</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#_3" class="nav-link">策略定義、導入資料及建立回測機器</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#_4" class="nav-link">最佳化回測結果</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#_5" class="nav-link">選擇不同的最佳化目標</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#_6" class="nav-link">應用在台股</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#_7" class="nav-link">其他變化</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="python">最佳化股票交易策略─Python筆記</h1>
<h2 id="_1">前情提要</h2>
<p>上一篇文章我們完成了使用<code>Backtesting.py</code>模組做的個股基本交易策略回測程式，其中用的是常見的均線交錯判定買/賣點，而在本篇當中，我們要嘗試使用模組中<code>Optimize</code>的功能，找出特定個股過往最適合的均線判定策略，做為未來交易策略的參考。程式的構成基本上是相同的，但在執行回測時會加入最佳化設定，由程式計算合適的交易方式，達到極大的利潤。</p>
<h2 id="_2">引入模組</h2>
<pre><code class="language-python">from backtesting import Backtest, Strategy #引入回測和交易策略功能

from backtesting.lib import crossover #從lib子模組引入判斷均線交會功能
from backtesting.test import SMA #從test子模組引入繪製均線功能

import pandas as pd #引入pandas讀取股價歷史資料CSV檔
</code></pre>
<h2 id="_3">策略定義、導入資料及建立回測機器</h2>
<pre><code class="language-python">class SmaCross(Strategy): #交易策略命名為SmaClass，使用backtesting.py的Strategy功能
    n1 = 5 #設定第一條均線日數為5日(周線)
    n2 = 20 #設定第二條均線日數為20日(月線)，這邊的日數可自由調整

    def init(self):
        self.sma1 = self.I(SMA, self.data.Close, self.n1) #定義第一條均線為sma1，使用backtesting.py的SMA功能算繪
        self.sma2 = self.I(SMA, self.data.Close, self.n2) #定義第二條均線為sma2，使用backtesting.py的SMA功能算繪

    def next(self):
        if crossover(self.sma1, self.sma2): #如果周線衝上月線，表示近期是上漲的，則買入
            self.buy()
        elif crossover(self.sma2, self.sma1): #如果周線再與月線交叉，表示開始下跌了，則賣出
            self.sell()

stock = &quot;TSLA&quot; #設定要測試的股票標的名稱

df = pd.read_csv(f&quot;./data/{stock}.csv&quot;, index_col=0) #pandas讀取資料，並將第1欄作為索引欄
df = df.interpolate() #CSV檔案中若有缺漏，會使用內插法自動補值，不一定需要的功能
df.index = pd.to_datetime(df.index) #將索引欄資料轉換成pandas的時間格式，backtesting才有辦法排序

test = Backtest(df, SmaCross, cash=10000, commission=.002)
# 指定回測程式為test，在Backtest函數中依序放入(資料來源、策略、現金、手續費)

</code></pre>
<h2 id="_4">最佳化回測結果</h2>
<p>程式寫到這裡，我們已經把回測條件都建立好了，接下來要使用模組中的<code>Optimize</code>功能，由程式計算若我們的目標為利潤的最大值，則特斯拉股票在均線交叉的交易策略下要如何執行呢?</p>
<pre><code class="language-python">result = test.run() #原始結果

opt_result = test.optimize(n1=range(5, 50, 5),  #將回測機器加入optimize屬性，定義短均線的周期為5~50(每次加5)，長均線的周期為10~120(每次加5)
                    n2=range(10, 120, 5),
                    maximize='Equity Final [$]',  #最佳化目標為最終資產最大化
                    constraint=lambda p: p.n1 &lt; p.n2)  #限制n1及n2的範圍，只會計算n1小於n2的情況

print(&quot;Original strategy&quot;)
print(result) #印出result結果
print() #空一行
print(&quot;Optimize strategy&quot;)
print(opt_result)  #印出opt_result結果
</code></pre>
<p>為了方便比較差異，這邊選擇將最佳化前後的結果一起呈現，並加入文字說明區分前後結果。執行這個程式需要等候大約30秒~60秒的計算時間，接著便能看到回測結果：</p>
<pre><code class="language-python">Original strategy
Start                     2010-06-29 00:00:00
End                       2020-06-29 00:00:00
Duration                   3653 days 00:00:00
Exposure [%]                          96.5782
Equity Final [$]                      51692.9
Equity Peak [$]                         52497
Return [%]                            416.929
Buy &amp; Hold Return [%]                 4124.99
Max. Drawdown [%]                    -80.6771
Avg. Drawdown [%]                    -15.2517
Max. Drawdown Duration     1037 days 00:00:00
Avg. Drawdown Duration      120 days 00:00:00
Trades                                    149
Win Rate [%]                           38.255
Best Trade [%]                        353.968
Worst Trade [%]                      -17.9826
Avg. Trade [%]                        2.81325
Max. Trade Duration         197 days 00:00:00
Avg. Trade Duration          24 days 00:00:00
Expectancy [%]                        11.1337
SQN                                  0.708816
Sharpe Ratio                        0.0875347
Sortino Ratio                        0.672486
Calmar Ratio                        0.0348704
_strategy                            SmaCross
dtype: object

Optimize strategy
Start                       2010-06-29 00:00:00
End                         2020-06-29 00:00:00
Duration                     3653 days 00:00:00
Exposure [%]                            96.9614
Equity Final [$]                         155089 #最終資產提升了大約3倍
Equity Peak [$]                          246015
Return [%]                              1450.89
Buy &amp; Hold Return [%]                   4124.99
Max. Drawdown [%]                      -82.7275
Avg. Drawdown [%]                      -8.48113
Max. Drawdown Duration       1102 days 00:00:00
Avg. Drawdown Duration         54 days 00:00:00
Trades                                      138
Win Rate [%]                            44.9275
Best Trade [%]                          147.373
Worst Trade [%]                        -23.6136
Avg. Trade [%]                          2.77656
Max. Trade Duration           113 days 00:00:00
Avg. Trade Duration            26 days 00:00:00
Expectancy [%]                          10.4776
SQN                                    0.655627
Sharpe Ratio                           0.144873
Sortino Ratio                          0.508596
Calmar Ratio                          0.0335628
_strategy                 SmaCross(n1=15,n2=20) #在最終資產最大化的條件下，適合的交易策略是以15及20天的均線交叉操作
dtype: object
</code></pre>
<h2 id="_5">選擇不同的最佳化目標</h2>
<p>在<code>Optimize</code>功能中參數中，我們可以在<code>maximize</code>參數中放入不同的項目來調整回測機器，這邊我們要嘗試的是以<code>SQN</code>指數作為最佳化的指標。</p>
<p>「SQN」的全文為System Quality Number，常被翻譯為「系統品質指數」，他的計算方式是，SQN指數越高，通常表示這個交易策略越穩定：</p>
<pre><code class="language-python">((期望獲利/標準差)*交易次數)開根號
</code></pre>
<p>影響SQN高低的面向有以下幾點：</p>
<p>1) 期望獲利越大→SQN越高
2) 每次交易結果之間的標準差越小→SQN越高
3) 交易次數越多→SQN越高</p>
<p>而在SQN指數好壞的評估下，常用的表格如下：
SQN值|評價
---|---
&lt;1.00|很爛的系統
1.01~2.00|普通的系統，可以考慮使用
2.01~3.00|好的系統，建議使用
3.01~5.00|很好的系統，應努力維持
5.01~7.00|極佳的系統，難能可貴</p>
<blockquote>
<p>7.00|聖杯系統，百年一遇</p>
</blockquote>
<p>我們在程式碼中，將<code>maxmize</code>參數計算的條件改為<code>SQN</code>，再執行一次程式：</p>
<pre><code class="language-python">Original strategy
Start                     2010-06-29 00:00:00
End                       2020-06-29 00:00:00
Duration                   3653 days 00:00:00
Exposure [%]                          96.5782
Equity Final [$]                      51692.9
Equity Peak [$]                         52497
Return [%]                            416.929
Buy &amp; Hold Return [%]                 4124.99
Max. Drawdown [%]                    -80.6771
Avg. Drawdown [%]                    -15.2517
Max. Drawdown Duration     1037 days 00:00:00
Avg. Drawdown Duration      120 days 00:00:00
Trades                                    149
Win Rate [%]                           38.255
Best Trade [%]                        353.968
Worst Trade [%]                      -17.9826
Avg. Trade [%]                        2.81325
Max. Trade Duration         197 days 00:00:00
Avg. Trade Duration          24 days 00:00:00
Expectancy [%]                        11.1337
SQN                                  0.708816
Sharpe Ratio                        0.0875347
Sortino Ratio                        0.672486
Calmar Ratio                        0.0348704
_strategy                            SmaCross
dtype: object

Optimize strategy
Start                      2010-06-29 00:00:00
End                        2020-06-29 00:00:00
Duration                    3653 days 00:00:00
Exposure [%]                           96.1402
Equity Final [$]                        130315  #最終資產約增加了2.5倍
Equity Peak [$]                         132342
Return [%]                             1203.15
Buy &amp; Hold Return [%]                  4124.99
Max. Drawdown [%]                     -67.3037
Avg. Drawdown [%]                     -9.49771
Max. Drawdown Duration      2120 days 00:00:00
Avg. Drawdown Duration        89 days 00:00:00
Trades                                     116
Win Rate [%]                           40.5172
Best Trade [%]                         387.895
Worst Trade [%]                       -17.9826  
Avg. Trade [%]                         4.83321
Max. Trade Duration          201 days 00:00:00
Avg. Trade Duration           31 days 00:00:00
Expectancy [%]                         12.6711
SQN                                    1.37751  #SQN值較為增加
Sharpe Ratio                          0.122412
Sortino Ratio                          1.18451
Calmar Ratio                         0.0718119
_strategy                 SmaCross(n1=5,n2=30)  #適用的均線交叉判斷為5日及30日
dtype: object
</code></pre>
<p>這邊可以看到最佳化SQN的結果，與最佳化最終資產相比，最終的資產減少了約12%，但在交易回落與損失來說，SQN最佳化後的表現都比較好一點，但整體來說也不算是多棒的策略就是了...</p>
<h2 id="_6">應用在台股</h2>
<p>上一篇文章我們同樣將這個程式用台積電的歷史價格跑了一次，結果是賠錢的，所以我們這次分別用最終資產和SQN去跑，看看結果如何？程式碼如下(因為要算2個<code>Optimize</code>，程式執行時間會比較長)：</p>
<pre><code class="language-python">opt_result_equity = test.optimize(n1=range(5, 50, 5),  #將回測機器加入optimize屬性，定義短均線的周期為5~50(每次加5)，長均線的周期為10~120(每次加5)
                    n2=range(10, 120, 5),
                    maximize='Equity Final [$]',  #最佳化目標為最終資產最大化
                    constraint=lambda p: p.n1 &lt; p.n2)  #限制n1及n2的範圍，只會計算n1小於n2的情況

opt_result_sqn = test.optimize(n1=range(5, 50, 5),  #將回測機器加入optimize屬性，定義短均線的周期為5~50(每次加5)，長均線的周期為10~120(每次加5)
                    n2=range(10, 120, 5),
                    maximize='SQN',  #最佳化目標為SQN最大化
                    constraint=lambda p: p.n1 &lt; p.n2)  #限制n1及n2的範圍，只會計算n1小於n2的情況

print(&quot;Original strategy&quot;)
print(result) #印出result結果
print() #空一行
print(&quot;Optimize strategy 1&quot;)
print(opt_result_equity)  #印出opt_result_equity結果
print() #空一行
print(&quot;Optimize strategy 2&quot;)
print(opt_result_sqn)  #印出opt_result_sqn結果
</code></pre>
<p>執行後結果如下：</p>
<pre><code class="language-python">Original strategy
Start                     2010-01-04 00:00:00
End                       2020-06-29 00:00:00
Duration                   3829 days 00:00:00
Exposure [%]                          97.8062
Equity Final [$]                       4330.1
Equity Peak [$]                       10837.6
Return [%]                            -56.699
Buy &amp; Hold Return [%]                  380.74
Max. Drawdown [%]                    -73.3687
Avg. Drawdown [%]                    -22.5779
Max. Drawdown Duration     3449 days 00:00:00
Avg. Drawdown Duration      941 days 00:00:00
Trades                                    162
Win Rate [%]                          34.5679
Best Trade [%]                        23.1396
Worst Trade [%]                      -10.6913
Avg. Trade [%]                      -0.429462
Max. Trade Duration          98 days 00:00:00
Avg. Trade Duration          24 days 00:00:00
Expectancy [%]                        3.46975
SQN                                  -1.80742
Sharpe Ratio                       -0.0931454
Sortino Ratio                       -0.209145
Calmar Ratio                      -0.00585348
_strategy                            SmaCross
dtype: object

Optimize strategy 1
Start                       2010-01-04 00:00:00
End                         2020-06-29 00:00:00
Duration                     3829 days 00:00:00
Exposure [%]                            96.4482
Equity Final [$]                          26042
Equity Peak [$]                         28079.7
Return [%]                               160.42
Buy &amp; Hold Return [%]                    380.74
Max. Drawdown [%]                      -29.0209
Avg. Drawdown [%]                      -4.70563
Max. Drawdown Duration       1016 days 00:00:00
Avg. Drawdown Duration         58 days 00:00:00
Trades                                       45
Win Rate [%]                            55.5556
Best Trade [%]                          28.0365
Worst Trade [%]                        -7.73389
Avg. Trade [%]                           2.3475
Max. Trade Duration           323 days 00:00:00
Avg. Trade Duration            83 days 00:00:00
Expectancy [%]                          6.12501
SQN                                     1.84177
Sharpe Ratio                           0.266962
Sortino Ratio                           1.03557
Calmar Ratio                          0.0808899
_strategy                 SmaCross(n1=45,n2=60)
dtype: object

Optimize strategy 2
Start                       2010-01-04 00:00:00
End                         2020-06-29 00:00:00
Duration                     3829 days 00:00:00
Exposure [%]                            96.4482
Equity Final [$]                          26042
Equity Peak [$]                         28079.7
Return [%]                               160.42
Buy &amp; Hold Return [%]                    380.74
Max. Drawdown [%]                      -29.0209
Avg. Drawdown [%]                      -4.70563
Max. Drawdown Duration       1016 days 00:00:00
Avg. Drawdown Duration         58 days 00:00:00
Trades                                       45
Win Rate [%]                            55.5556
Best Trade [%]                          28.0365
Worst Trade [%]                        -7.73389
Avg. Trade [%]                           2.3475
Max. Trade Duration           323 days 00:00:00
Avg. Trade Duration            83 days 00:00:00
Expectancy [%]                          6.12501
SQN                                     1.84177
Sharpe Ratio                           0.266962
Sortino Ratio                           1.03557
Calmar Ratio                          0.0808899
_strategy                 SmaCross(n1=45,n2=60)
dtype: object
</code></pre>
<p>結果可以看到，在有限的選擇中，程式算出了相同的結果：在短均線45天、長均線60天交叉操作的狀況下同時會取得最大資產與最佳的SQN，而SQN值來到1.84，距離好的系統已經不遠。</p>
<h2 id="_7">其他變化</h2>
<p>在<code>backtesting.py</code>輸出的結果中，還有其他常用的系統評估指標：
指標|說明
---|---
夏普比率|(報酬率 – 無風險利率)/標準差，表示在承受1%的風險下，能得到多少比率的報酬？夏普比率越高，獲利能力就越強
索丁諾比率|與夏普比率類似，但計算標準差時只採計負標準差，也就是排除賺錢的情況，僅用可能賠錢的情況來判斷系統強度，原則上較夏普比率更有鑑別度
卡瑪比率|年化報酬率/最大回落，卡瑪比率越高表示系統勝率與報酬率越穩定</p>
<p>可以嘗試將這些指標都帶入程式測試，尋找滿意的策略做為參考。</p></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../js/base.js" defer></script>
        <script src="../../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
